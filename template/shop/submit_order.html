{% extends "base.html" %}
{% block title %}

{% endblock %}


{% block cssblock %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/icheck_blue.css">
{% endblock %}

{% block javascriptblock %}
<script src="{{ STATIC_URL }}js/icheck.min.js"></script>
{% endblock %}
{% block body %}

{% verbatim %}
<div ms-controller="submit_order">
    <header data-am-widget="header" class="am-header am-header-default">
        <div class="am-header-left am-header-nav">
            <a href="/shopping_cart/">
                <i class="am-header-icon am-icon-arrow-left"></i>购物车
            </a>
        </div>
        <h1 class="am-header-title">
            <a href="#title-link">填写订单信息</a>
        </h1>

        <div class="am-header-right am-header-nav">
            <a href="#right-link" class="">
                <!--
                <i class="am-header-icon am-icon-trash"></i>
                -->
            </a>
        </div>
    </header>
    <div class="am-g">
        <div class="am-panel am-panel-default">
            <div class="am-panel-bd">共13件商品，合计12.23元</div>
        </div>
        <form class="am-form">
            <fieldset>
                <div class="am-form-group">
                    <label>支付方式</label>
                    <input type="radio" name="icheck">货到付款
                    <input type="radio" name="icheck">在线支付
                </div>

                <div class="am-form-group">
                    <label>姓名</label>
                    <input type="text" class="" placeholder="输入您的姓名" ms-duplex="name">
                </div>

                <div class="am-form-group">
                    <label>手机</label>
                    <input type="text" class="" maxlength="11" placeholder="您的手机号码" ms-duplex="phone">
                </div>
                <div class="am-form-group">
                    <label>地址</label>
                    <input type="text" class="" placeholder="您的收货地址" ms-duplex="address">
                </div>

                <div class="am-form-group">
                    <label>备注</label>
                    <input type="text" class="" placeholder="还有什么想说的">
                </div>

                <p>
                    <button type="button" class="am-btn am-btn-default" ms-click="submit_order">提交</button>
                </p>
            </fieldset>
        </form>
    </div>
    <div class="am-modal am-modal-no-btn" tabindex="-1" id="modal">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">&nbsp;
                <a href="javascript: void(0)" class="am-close am-close-spin" data-am-modal-close>&times;</a>
            </div>
            <div class="am-modal-bd" id="modal_content" ms-html="modal_content">

            </div>
        </div>
    </div>
    <script>
        $('input').iCheck({
            radioClass: 'icheckbox_square-blue'
        });
        function show_modal(content) {
            vm.modal_content = content;
            $("#modal").modal();
        }
        var vm = avalon.define({
            $id: "submit_order",
            name: "",
            phone: "",
            address: "",
            modal_content: "",
            submit_order: function () {
                if(vm.name.length < 2){
                    show_modal('<div class="am-alert am-alert-info" data-am-alert>请输入正确的姓名</div>');
                    return;
                }
                if(vm.phone.length != 11){
                    show_modal('<div class="am-alert am-alert-info" data-am-alert>请输入正确的11位手机号码</div>');
                }
                if(vm.phone.address <= 3){
                    show_modal('<div class="am-alert am-alert-info" data-am-alert>请输入正确的地址</div>');
                }
            }
        });
        $.ajax({
            url: "/",
            method: "get",
            dataType: "json",
            success: function (json) {
                vm.name = json.name;
                vm.phone = json.phone;
                vm.address = json.address;
            }
        })
    </script>
</div>
{% endverbatim %}


{% endblock %}